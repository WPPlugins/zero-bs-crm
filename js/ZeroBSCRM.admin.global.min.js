function zbscrm_JS_bindDateRangePicker(){if("function"==typeof jQuery(".zbs-date").daterangepicker){var e={format:"DD.MM.YYYY"};"undefined"!=typeof window.zbsDateLocaleOverride&&(e=window.zbsDateLocaleOverride),jQuery(".zbs-date").daterangepicker({singleDatePicker:!0,showDropdowns:!0,locale:e},function(){})}}function zbscrm_JS_bindFieldValidators(){jQuery(".numbersOnly").keyup(function(){var e=this.value.replace(/[^0-9\.]/g,"");this.value!=e&&(this.value=e)})}function zbscrm_JS_bindCloseLogs(){jQuery(".zbsCloseThisAndLog").click(function(){var e=jQuery(this).attr("data-closelog");if(""!==e&&!window.zbscrmjs_closeLogBlocker){var n=this;window.zbscrmjs_closeLogBlocker=!0;var r={action:"logclose",sec:window.zbscrmjs_globSecToken,closing:e};jQuery.ajax({type:"POST",url:ajaxurl,data:r,dataType:"json",timeout:2e4,success:function(){var e=n;jQuery(e).parent().slideUp(),window.zbscrmjs_closeLogBlocker=!1},error:function(){var e=n;jQuery(e).parent().slideUp(),window.zbscrmjs_closeLogBlocker=!1}})}})}function zbscrm_JS_infoBoxInit(){jQuery(".zbs-infobox").each(function(e,n){var r=jQuery(n).html();jQuery(n).html('<i class="fa fa-info-circle zbs-help-ico"></i><div class="zbs-infobox-detail"></div>'),setTimeout(function(){var e=n;jQuery(".zbs-infobox-detail",jQuery(e)).html(r),jQuery(e).addClass("zbs-live"),setTimeout(function(){jQuery(".zbs-infobox").hover(function(){jQuery("i.zbs-help-ico",jQuery(this)).css("opacity","1"),jQuery(".zbs-infobox-detail",jQuery(this)).show()},function(){jQuery("i.zbs-help-ico",jQuery(this)).css("opacity","0.6"),jQuery(".zbs-infobox-detail",jQuery(this)).hide()})},0)},0)})}function zbscrm_JS_Bind_Typeaheads(){zbscrm_JS_Bind_Typeaheads_Customers()}function zbscrm_JS_Bind_Typeaheads_Customers(){if(jQuery(".zbstypeaheadwrap .zbstypeahead").length>0){var e=new Bloodhound({datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.name)},queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(e){return e.id},prefetch:{url:window.zbscrmBHURLCustomers,ttl:3e5,transform:function(e){return jQuery.map(e,function(e){return{id:e.id,name:e.name,created:e.created}})}}});jQuery(".zbstypeaheadwrap .zbstypeahead").each(function(){jQuery(this).typeahead({hint:!0,highlight:!0,minLength:1},{name:"customers",source:e,display:"name"});var n=jQuery(this).attr("data-zbsopencallback");"string"==typeof n&&n.length>0&&jQuery(this).bind("typeahead:select",function(e,r){var i=n;"function"==typeof window[i]&&window[i](r)})})}}function zbscrm_js_uiSpinnerBlocker(e){var n='<i class="fa fa-circle-o-notch fa-spin" aria-hidden="true"></i>';return"undefined"!=typeof e&&(n=e),'<div class="zbsSpinnerBlocker"><div class="zbsSpinnerBG"></div><div class="zbsSpinnerIco">'+n+"</div></div>"}function zbscrm_js_getCustInvs(e,n,r){if("undefined"!=typeof e&&e>0){if("undefined"!=typeof window.zbscrm_custcache_invoices[e])return"function"==typeof n&&n(window.zbscrm_custcache_invoices[e]),window.zbscrm_custcache_invoices[e];var i={action:"getinvs",sec:window.zbscrmjs_globSecToken,cid:e};jQuery.ajax({type:"POST",url:ajaxurl,data:i,dataType:"json",timeout:2e4,success:function(r){return window.zbscrm_custcache_invoices[e]=r,"function"==typeof n&&n(r),r},error:function(e){"function"==typeof r&&r(e)}})}else"function"==typeof r&&r({fail:1});return!1}function zbscrm_JS_validateEmail(e){var n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(e)}function zbscrmjs_prettifyLongInts(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function zbscrmjs_permify(e){return e.replace(" ","_").replace(":","_").toLowerCase()}function zbscrmjs_nl2br(e,n){var r=n||"undefined"==typeof n?"<br />":"<br>";return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+r+"$2")}function zbscrmjs_reversenl2br(e,n){var r="";return"undefined"!=typeof n&&(r="\r\n"),e.split("<br />").join(r)}function zbscrmjs_getTimeZoneOffset(){var e="0000";if("undefined"!=typeof window.zbsCRMTimeZoneOffset){e="";var n=parseInt(window.zbsCRMTimeZoneOffset),r=window.zbsCRMTimeZoneOffset.toString();n>0?(10>n&&(e="0"),e+=r.replace(".",""),e="+"+e,4==e.length?e+="0":3==e.length&&(e+="00")):(n>-10&&(e="0"),e+=r.replace(".","").replace("-",""),e="-"+e,4==e.length?e+="0":3==e.length&&(e+="00"))}return e}function ucwords(e){return(e+"").replace(/^([a-z\u00E0-\u00FC])|\s+([a-z\u00E0-\u00FC])/g,function(e){return e.toUpperCase()})}function empty(e){return!e||0===e.length}jQuery(document).ready(function(){zbscrm_JS_infoBoxInit(),zbscrm_JS_Bind_Typeaheads(),zbscrm_JS_bindDateRangePicker(),zbscrm_JS_bindFieldValidators(),zbscrm_JS_bindCloseLogs()});var zbscrmjs_closeLogBlocker=!1,zbscrm_custcache_invoices={};